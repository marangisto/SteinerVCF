Version 4
SHEET 1 4476 1404
WIRE 3552 -624 3552 -656
WIRE 3552 -528 3552 -544
WIRE 3680 -528 3552 -528
WIRE 3552 -512 3552 -528
WIRE 3680 -512 3680 -528
WIRE 3680 -432 3680 -448
WIRE 3008 -400 2928 -400
WIRE 3136 -400 3088 -400
WIRE 3312 -400 3136 -400
WIRE 3552 -400 3552 -432
WIRE 3552 -400 3376 -400
WIRE 3424 -320 3248 -320
WIRE 3552 -320 3552 -400
WIRE 3552 -320 3504 -320
WIRE 3600 -320 3552 -320
WIRE 3888 -320 3680 -320
WIRE 3136 -272 3136 -400
WIRE 3248 -272 3248 -320
WIRE 3888 -272 3888 -320
WIRE 896 -192 832 -192
WIRE 3136 -160 3136 -192
WIRE 896 -128 896 -192
WIRE 3680 -128 3568 -128
WIRE 4176 -128 3744 -128
WIRE 608 -96 608 -272
WIRE 2512 -64 1632 -64
WIRE 3248 -64 3248 -192
WIRE 3312 -64 3248 -64
WIRE 3888 -64 3888 -192
WIRE 3888 -64 3824 -64
WIRE 3248 0 3248 -64
WIRE 3312 0 3312 -64
WIRE 3568 0 3568 -128
WIRE 3824 0 3824 -64
WIRE 3888 0 3888 -64
WIRE 2032 16 1968 16
WIRE 2160 16 2096 16
WIRE 608 32 608 -16
WIRE 1168 32 608 32
WIRE 1312 32 1248 32
WIRE 1392 32 1312 32
WIRE 1520 32 1456 32
WIRE 608 64 608 32
WIRE 3440 80 3440 0
WIRE 3568 80 3568 0
WIRE 3696 80 3696 0
WIRE 1760 112 1712 112
WIRE 1968 112 1968 16
WIRE 1968 112 1840 112
WIRE 2016 112 1968 112
WIRE 2160 112 2160 16
WIRE 2160 112 2096 112
WIRE 896 160 896 -48
WIRE 1168 160 896 160
WIRE 1312 160 1312 32
WIRE 1312 160 1248 160
WIRE 1376 160 1312 160
WIRE 1520 160 1520 32
WIRE 1520 160 1456 160
WIRE 3328 176 3136 176
WIRE 3344 176 3328 176
WIRE 3440 176 3440 144
WIRE 3440 176 3408 176
WIRE 3696 176 3696 144
WIRE 3696 176 3440 176
WIRE 4160 176 3696 176
WIRE 4272 176 4240 176
WIRE 896 208 896 160
WIRE 1968 208 1968 112
WIRE 2016 208 1968 208
WIRE 2160 208 2160 112
WIRE 2160 208 2080 208
WIRE 3568 224 3568 144
WIRE 3568 224 3136 224
WIRE 4272 240 4272 176
WIRE 3328 256 3328 176
WIRE 3568 256 3568 224
WIRE 1168 288 1072 288
WIRE 1312 288 1312 160
WIRE 1312 288 1248 288
WIRE 1376 288 1312 288
WIRE 1520 288 1520 160
WIRE 1632 288 1632 -64
WIRE 1632 288 1520 288
WIRE 1776 288 1632 288
WIRE 1968 288 1968 208
WIRE 1968 288 1856 288
WIRE 2016 288 1968 288
WIRE 1520 304 1520 288
WIRE 1520 304 1440 304
WIRE 2160 304 2160 208
WIRE 2160 304 2080 304
WIRE 2256 304 2160 304
WIRE 2416 304 2336 304
WIRE 2512 304 2512 -64
WIRE 608 320 608 144
WIRE 1376 320 1312 320
WIRE 2016 320 1968 320
WIRE 896 336 896 288
WIRE 1072 352 1072 288
WIRE 1312 352 1312 320
WIRE 3328 352 3328 336
WIRE 3568 352 3568 336
WIRE 2160 384 2160 304
WIRE 3248 400 3248 0
WIRE 3504 400 3248 400
WIRE 3888 400 3888 0
WIRE 3888 400 3600 400
WIRE 3504 432 3504 400
WIRE 3600 432 3600 400
WIRE 3008 480 2880 480
WIRE 3328 480 3088 480
WIRE 3440 480 3328 480
WIRE 3728 480 3664 480
WIRE 1968 528 1968 320
WIRE 2160 528 2160 464
WIRE 3728 544 3728 480
WIRE 3504 624 3504 528
WIRE 3552 624 3504 624
WIRE 3600 624 3600 528
WIRE 3600 624 3552 624
WIRE 2160 656 2160 592
WIRE 3328 656 3328 480
WIRE 3552 656 3552 624
WIRE 3552 752 3552 736
WIRE 3648 752 3552 752
WIRE 3552 784 3552 752
WIRE 3648 784 3648 752
WIRE 816 896 816 832
WIRE 3328 912 3328 736
WIRE 3648 912 3648 848
WIRE 3552 928 3552 864
WIRE 1808 976 1808 912
WIRE 2080 976 2080 912
WIRE 1280 1008 1280 976
WIRE 1392 1008 1392 976
WIRE 1520 1008 1520 944
WIRE 816 1056 816 976
WIRE 896 1056 816 1056
WIRE 1808 1104 1808 1056
WIRE 2080 1104 2080 1056
WIRE 1280 1120 1280 1088
WIRE 1392 1120 1392 1088
WIRE 1520 1120 1520 1088
WIRE 896 1136 896 1056
WIRE 816 1216 816 1168
FLAG 1280 1120 0
FLAG 1280 976 VCC
FLAG 816 832 VCC
FLAG 1392 1120 0
FLAG 1392 976 VSS
FLAG 1520 1120 0
FLAG 1520 944 Vin
FLAG 816 1216 CMN
FLAG 1808 1104 0
FLAG 1808 912 Vcv
FLAG 896 1136 0
FLAG 1408 272 VCC
FLAG 1408 336 VSS
FLAG 1072 352 0
FLAG 1312 352 0
FLAG 608 320 VSS
FLAG 1968 528 0
FLAG 1712 112 VCC
FLAG 2048 272 VCC
FLAG 2048 336 VSS
FLAG 2416 304 CMN
FLAG 608 -272 VCC
FLAG 896 336 0
FLAG 832 -192 Vcv
FLAG 2160 656 VSS
FLAG 3648 912 0
FLAG 3552 928 VSS
FLAG 3568 352 0
FLAG 3328 352 0
FLAG 3680 -432 0
FLAG 3552 -656 VCC
FLAG 3136 -160 0
FLAG 3728 544 0
FLAG 3328 912 0
FLAG 2880 480 Vcv1
FLAG 2928 -400 Vin
FLAG 2080 1104 0
FLAG 2080 912 Vcv1
DATAFLAG 4000 -128 ""
DATAFLAG 2944 480 ""
DATAFLAG 3264 480 ""
DATAFLAG 3248 96 ""
DATAFLAG 3888 128 ""
SYMBOL voltage 1280 992 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 1520 992 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 5
SYMATTR InstName V2
SYMATTR Value SINE(0 5 1k)
SYMBOL current 816 896 R0
SYMATTR InstName I1
SYMATTR Value PWL(0 0 2m 0 8m 1m)
SYMBOL voltage 1392 992 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value -12
SYMBOL res 800 1072 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL voltage 1808 960 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcv
SYMATTR Value PWL(0 0 1m 0 99m 5)
SYMBOL Opamps\\opamp2 1408 240 R0
SYMATTR InstName U4
SYMATTR Value TL071
SYMBOL res 1472 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 4.7k
SYMBOL res 1264 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 4.7k
SYMBOL res 1264 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 100k
SYMBOL res 1264 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 150k
SYMBOL Opamps\\opamp2 2048 240 R0
SYMATTR InstName U5
SYMATTR Value TL071
SYMBOL res 2112 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 47k
SYMBOL res 1872 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 680
SYMBOL res 1856 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 130k
SYMBOL diode 2080 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 2352 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL res 592 -112 R0
SYMATTR InstName R10
SYMATTR Value 50k
SYMBOL res 592 48 R0
SYMATTR InstName R12
SYMATTR Value 50k
SYMBOL npn 3440 432 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res 880 192 R0
SYMATTR InstName R34
SYMATTR Value 100k
SYMBOL res 880 -144 R0
SYMATTR InstName R35
SYMATTR Value 1
SYMBOL res 2144 368 R0
SYMATTR InstName R36
SYMATTR Value 1k
SYMBOL LED 2144 528 R0
SYMATTR InstName D4
SYMATTR Value AOT-2015
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1456 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 2.2nF
SYMBOL cap 2096 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 2.2nF
SYMBOL npn 3664 432 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 3536 640 R0
SYMATTR InstName R1
SYMATTR Value 3k3
SYMBOL res 3536 768 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL cap 3632 784 R0
SYMATTR InstName C3
SYMATTR Value 47µ
SYMBOL diode 3312 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 3376 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 3440 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL diode 3504 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL diode 3568 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode 3632 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL diode 3696 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D9
SYMATTR Value 1N4148
SYMBOL diode 3760 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D10
SYMATTR Value 1N4148
SYMBOL diode 3824 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D11
SYMATTR Value 1N4148
SYMBOL diode 3888 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D12
SYMATTR Value 1N4148
SYMBOL cap 3424 80 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL cap 3552 80 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL cap 3680 80 R0
SYMATTR InstName C6
SYMATTR Value 1n
SYMBOL res 3552 240 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL cap 3408 160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 2.2µ
SYMBOL res 3312 240 R0
SYMATTR InstName R4
SYMATTR Value 220k
SYMBOL res 3232 -288 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 3872 -288 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 3520 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 500
SYMBOL res 3696 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 500
SYMBOL res 3536 -528 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 3536 -640 R0
SYMATTR InstName R13
SYMATTR Value 1
SYMBOL cap 3664 -512 R0
SYMATTR InstName C8
SYMATTR Value 47µ
SYMBOL cap 3376 -416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 2.2µ
SYMBOL res 3120 -288 R0
SYMATTR InstName R14
SYMATTR Value 220k
SYMBOL res 3312 640 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL cap 3744 -144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 1µ
SYMBOL res 3104 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL res 3104 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 47k
SYMBOL res 3152 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 47k
SYMBOL res 4256 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL res 3152 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 47k
SYMBOL voltage 2080 960 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcv1
SYMATTR Value 3
TEXT 2328 1024 Left 2 !.lib lm13700.sub
TEXT 2328 992 Left 2 !;tran 1u 100m
TEXT 2328 1056 Left 2 !.include TL071.mod
TEXT 2328 960 Left 2 !;.ac dec 1u 1 1000k
TEXT 2336 920 Left 2 !.op
